version: '3.6'
services:
  frontend:
    build: ./frontend
    environment: 
     - BACKEND_URL=http://localhost:8888
    ports:
     - "8000:80"

  proxy:
    build: ./proxy
    hostname: localhost
    environment: 
     - TARGET_URL=http://backend:8080
     - PYTHONUNBUFFERED=1
    ports:
     - "8888:8888"

  backend:
    build: ./backend
    hostname: localhost
    ports:
     - "8080:8080"

  redis:
    image: redis
    ports:
     - "6379:6379"
